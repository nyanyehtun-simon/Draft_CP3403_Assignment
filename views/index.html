<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Form Action</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <script src="https://unpkg.com/react@16.4.2/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16.4.2/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>

    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/json2html/1.2.0/json2html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.json2html/1.2.0/jquery.json2html.min.js"></script>

    <link type="text/css" rel="stylesheet" href="stylesheets/style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

   <!-- <link rel="stylesheet" href="stylesheets/input-file.css">
    <script src="stylesheets/input-file.js"></script>-->


    <script>
        window.onload = function () {
            setTimeout(() => {
                console.log("document loaded");
                document.getElementById("demo").innerHTML = "CP3403 Assignment - Programming Product";

                var vartoadd = (("<%= tablet%>").replace(/&lt;/g, "<")).replace(/&gt;/g, ">");
                var tableToShow = ((("<%= tableToShow%>")
                    .replace(/&lt;/g, "<"))
                    .replace(/&gt;/g, ">"))
                    .replace(/&#34;/g, "\"");

                console.log(tableToShow);

                console.log(
                    (vartoadd
                        .replace(/&#34;/g, "\""))
                );

                var data = JSON.parse(vartoadd.replace(/&#34;/g, "\""));
                console.log(data);

                var dataAttribute = [];

                Object.keys(data).forEach(function (key) {
                    dataAttribute.push({
                        attribute: key
                    })
                });
                dataAttribute.pop();

                $("#example-jquery-app-output").html(tableToShow);

                //Just for testing:
                /*
                var data = [
                    {"title":"The Shawshank Redemption","year":"1994","rating":"9.2"},
                    {"title":"The Godfather","year":"1972","rating":"9.2"},
                    {"title":"The Godfather: Part II","year":"1974","rating":"9.0"},
                    {"title":"The Dark Knight ","year":"2008","rating":"9.0"},
                    {"title":"12 Angry Men","year":"1957","rating":"9.0"}
                ];
                */
                /*
                var transforms = {
                    "list":{"<>":"ul","html":function(){
                            return($.json2html(dataAttribute,transforms.items));
                        }},

                    "items":{"<>":"li","html":function(obj, index){

                            return( (index+1) + ". " + obj.attribute);

                        },"onclick":function(e){
                            $("#example-jquery-app-output .details").empty().json2html(e.obj,transforms.details);
                        }},

                    "details":[
                        {"<>":"div","html":[
                                {"<>":"h5","text":"${title}"}
                            ]},
                        {"<>":"div","text":"Year: ${year}"},
                        {"<>":"div","text":"Rating: ${rating}"},
                    ]
                };

                $("#example-jquery-app-output .list").json2html({},transforms.list);
                */
            }, 700);
        }
        //$("#example-jquery-app-output .list").json2html({},transforms.list);
    </script>
</head>
<body class="p-0">

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-6 p-5" style="background-color: #F5F5F0; height:100vh; display: flex; align-items: center;">

            <div class="align-middle">
                <h1 class="h1" id="demo"></h1>

                <h3 class="mt-5" id="username-text"><%= name%></h3>

                <form class="mt-5 mb-5" method="POST" action="/submit-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <input class="form-control-file" type="file" name="upload" multiple>

                    </div>
                    <span class="glyphicon glyphicon-ok"></span><input class="btn btn-primary" type="submit"/>
                </form>


            </div>


        </div>
        <div class="col-sm-6 p-5" style="background-color: #76D7D0; height:100vh; display: flex; align-items: center;">
            <div>
                Dear my CP3403 group, please click
                <form method="get" action="/download">
                    <button type="submit">here</button>
                </form>
                to download test file.
            </div>
        </div>

    </div>
</div>

</body>
</html>